{\rtf1\ansi\ansicpg932\cocoartf2867
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 HelveticaNeue;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab560
\pard\pardeftab560\slleading20\pardirnatural\partightenfactor0

\f0\fs26 \cf0 <!DOCTYPE html>\
<html lang="ja">\
<head>\
<meta charset="UTF-8">\
<meta name="viewport" content="width=device-width, initial-scale=1.0">\
<title>\uc0\u12491 \u12467 \u12479 \u12531  for School</title>\
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet">\
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>\
\
<style>\
    :root \{\
        --primary: #5d75d6; --accent: #6ce5e8; --bg: #fcfdfd;\
        --card: #ffffff; --text: #4a4a4a; --wrong: #ff6b6b; --correct: #4ecdc4;\
    \}\
    body \{\
        font-family: "M PLUS Rounded 1c", sans-serif;\
        background: var(--bg); margin: 0; color: var(--text);\
        display: flex; flex-direction: column; height: 100vh;\
        background-image: radial-gradient(#e0e7ff 1px, transparent 1px);\
        background-size: 20px 20px; overflow: hidden;\
    \}\
    /* \uc0\u12524 \u12452 \u12450 \u12454 \u12488  */\
    header \{\
        background: var(--primary); color: white; padding: 10px 20px;\
        display: flex; justify-content: space-between; align-items: center;\
        box-shadow: 0 4px 10px rgba(93, 117, 214, 0.2); z-index: 10;\
    \}\
    h1 \{ margin: 0; font-size: 1.2rem; font-weight: 800; \}\
    .status-badge \{\
        font-size: 0.8rem; background: rgba(255,255,255,0.2); padding: 4px 10px; border-radius: 10px;\
    \}\
\
    .container \{\
        flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;\
        padding: 1rem; position: relative; width: 100%; max-width: 800px; margin: 0 auto; box-sizing: border-box;\
    \}\
\
    /* \uc0\u30011 \u38754 \u20999 \u12426 \u26367 \u12360  */\
    .screen \{\
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;\
        background: var(--bg); display: none; flex-direction: column;\
        align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; z-index: 20;\
    \}\
    .screen.active \{ display: flex; \}\
\
    /* UI\uc0\u12497 \u12540 \u12484  */\
    .card-box \{\
        background: white; padding: 2rem; border-radius: 25px;\
        box-shadow: 0 10px 25px rgba(0,0,0,0.05); border: 4px solid #f0f4ff;\
        width: 100%; max-width: 400px; text-align: center;\
    \}\
    select \{\
        width: 100%; padding: 1rem; border: 2px solid var(--primary);\
        border-radius: 15px; font-size: 1.1rem; font-weight: bold;\
        color: var(--primary); background: #f0f4ff; margin-bottom: 1rem;\
    \}\
    .big-btn \{\
        background: var(--primary); color: white; border: none;\
        padding: 1rem 3rem; font-size: 1.5rem; border-radius: 50px;\
        font-weight: 800; cursor: pointer; box-shadow: 0 6px 0 rgba(46, 61, 128, 0.3);\
        transition: transform 0.1s; margin-top: 10px;\
    \}\
    .big-btn:active \{ transform: translateY(4px); box-shadow: 0 2px 0 rgba(46, 61, 128, 0.3); \}\
\
    /* \uc0\u12463 \u12452 \u12474 \u30011 \u38754  */\
    .flashcard \{\
        background: white; width: 100%; max-width: 600px; height: 260px;\
        border-radius: 25px; display: flex; flex-direction: column;\
        align-items: center; justify-content: center; margin-bottom: 2rem;\
        border: 4px solid #f0f4ff; border-bottom: 8px solid #e0e7ff; position: relative;\
    \}\
    .word-text \{ font-size: 3rem; font-weight: 800; \}\
    .options-grid \{ display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; width: 100%; max-width: 600px; \}\
    .opt-btn \{\
        background: white; border: 3px solid #edeff4; border-radius: 15px;\
        padding: 1.2rem; font-weight: bold; font-size: 1rem; cursor: pointer;\
        transition: 0.2s;\
    \}\
    \
    /* \uc0\u12525 \u12540 \u12487 \u12451 \u12531 \u12464  */\
    #loading-msg \{ font-weight: bold; color: var(--primary); margin-top: 10px; \}\
\
    /* \uc0\u12514 \u12496 \u12452 \u12523 \u35519 \u25972  */\
    @media (max-width: 600px) \{\
        .options-grid \{ grid-template-columns: 1fr; \}\
        .word-text \{ font-size: 2.2rem; \}\
    \}\
</style>\
</head>\
<body>\
\
<header>\
    <h1>\uc0\u12491 \u12467 \u12479 \u12531  Cloud</h1>\
    <div class="status-badge" id="data-status">\uc0\u55357 \u56545  Connecting...</div>\
</header>\
\
<div class="container">\
\
    <div id="screen-load" class="screen active">\
        <div class="card-box">\
            <h2>\uc0\u25945 \u26448 \u12434 \u35501 \u12415 \u36796 \u12435 \u12391 \u12356 \u12414 \u12377 ...</h2>\
            <p style="color:#939bb4;">\uc0\u20808 \u29983 \u12398 \u12473 \u12503 \u12524 \u12483 \u12489 \u12471 \u12540 \u12488 \u12363 \u12425 <br>\u26368 \u26032 \u12487 \u12540 \u12479 \u12434 \u21462 \u24471 \u20013 </p>\
            <div id="loading-msg">waiting...</div>\
        </div>\
    </div>\
\
    <div id="screen-start" class="screen">\
        <div class="card-box">\
            <label style="display:block; text-align:left; color:#939bb4; font-weight:800; margin-bottom:5px;">Unit Select</label>\
            <select id="unitSelect"></select>\
\
            <label style="display:block; text-align:left; color:#939bb4; font-weight:800; margin-bottom:5px;">Mode</label>\
            <select id="modeSelect">\
                <option value="en-jp">\uc0\u55357 \u56541  \u33521  \u8594  \u26085  (4\u25246 )</option>\
                <option value="jp-en">\uc0\u55357 \u56580  \u26085  \u8594  \u33521  (4\u25246 )</option>\
                <option value="flash">\uc0\u55357 \u56519  \u12501 \u12521 \u12483 \u12471 \u12517 \u12459 \u12540 \u12489 </option>\
            </select>\
            \
            <button class="big-btn" onclick="startGame()">START</button>\
        </div>\
        <div style="margin-top:20px; color:#939bb4; font-size:0.8rem;">\
            \uc0\u8251  \u12487 \u12540 \u12479 \u26356 \u26032 \u12399 \u12502 \u12521 \u12454 \u12470 \u12434 \u20877 \u35501 \u12415 \u36796 \u12415 \u12375 \u12390 \u12367 \u12384 \u12373 \u12356 \
        </div>\
    </div>\
\
    <div id="screen-game" class="screen">\
        <div style="width:100%; max-width:600px; display:flex; justify-content:space-between; margin-bottom:10px; font-weight:800; color:#939bb4;">\
            <span onclick="location.reload()" style="cursor:pointer;">\uc0\u10060  \u20013 \u26029 </span>\
            <span id="score-disp">0 / 0</span>\
        </div>\
\
        <div class="flashcard" id="card-area" onclick="handleCardClick()">\
            <div id="q-text" class="word-text"></div>\
            <div id="h-text" style="color:#939bb4; margin-top:10px; font-weight:bold;"></div>\
            <span style="position:absolute; top:15px; right:15px; font-size:1.5rem; cursor:pointer;" onclick="speak(currentWord.en); event.stopPropagation();">\uc0\u55357 \u56586 </span>\
        </div>\
\
        <div id="options-area" class="options-grid"></div>\
\
        <div id="flash-controls" style="display:none; gap:20px;">\
            <button class="opt-btn" onclick="nextQuestion(-1)">\uc0\u8592  Prev</button>\
            <button class="opt-btn" onclick="nextQuestion(1)">Next \uc0\u8594 </button>\
        </div>\
    </div>\
\
    <div id="screen-result" class="screen">\
        <div class="card-box">\
            <h2 style="color:var(--primary); font-size:2rem; margin:0;">Great Job!</h2>\
            <p id="final-score" style="font-size:1.5rem; font-weight:800; margin:1rem 0;">Score: 100%</p>\
            <button class="big-btn" onclick="location.reload()">\uc0\u12418 \u12358 \u19968 \u24230 </button>\
        </div>\
    </div>\
\
</div>\
\
<script>\
    // ==================================================\
    // \uc0\u20808 \u29983 \u65281 \u12371 \u12371 \u12395 \u12467 \u12500 \u12540 \u12375 \u12383 \u12300 \u12473 \u12503 \u12524 \u12483 \u12489 \u12471 \u12540 \u12488 \u12398 CSV URL\u12301 \u12434 \u36028 \u12387 \u12390 \u12367 \u12384 \u12373 \u12356 \u65281 \
    // ==================================================\
    const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQkjW85DByBOi5XpuXoGq1OrHytiO2tJNdariA_GDO6ETQCDSgFGsJuy427qxrjN6kKOElWMEdIg3XC/pub?output=csv"; \
    // \uc0\u20363 : "https://docs.google.com/spreadsheets/d/e/2PACX-.../pub?output=csv"\
    // ==================================================\
\
    let allData = [];     // \uc0\u20840 \u12487 \u12540 \u12479 \
    let unitData = \{\};    // Unit\uc0\u12372 \u12392 \u12398 \u12487 \u12540 \u12479 \
    let playQueue = [];   // \uc0\u29694 \u22312 \u12503 \u12524 \u12452 \u20013 \u12398 \u12522 \u12473 \u12488 \
    let currentIndex = 0;\
    let score = 0;\
    let mode = "en-jp";\
    let currentWord = null;\
\
    // \uc0\u36215 \u21205 \u26178 \u12398 \u20966 \u29702 \
    window.onload = function() \{\
        if(SHEET_CSV_URL === "\uc0\u12371 \u12371 \u12395 URL\u12434 \u36028 \u12426 \u20184 \u12369 " || SHEET_CSV_URL === "") \{\
            document.getElementById('loading-msg').innerHTML = "\uc0\u9888 \u65039  \u12467 \u12540 \u12489 \u20869 \u12398 URL\u12364 \u35373 \u23450 \u12373 \u12428 \u12390 \u12356 \u12414 \u12379 \u12435 \u12290 <br>HTML\u12501 \u12449 \u12452 \u12523 \u12434 \u32232 \u38598 \u12375 \u12390 URL\u12434 \u36028 \u12387 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 ";\
            return;\
        \}\
        fetchData();\
    \};\
\
    // \uc0\u12487 \u12540 \u12479 \u12398 \u21462 \u24471  (PapaParse\u20351 \u29992 )\
    function fetchData() \{\
        Papa.parse(SHEET_CSV_URL, \{\
            download: true,\
            header: true,\
            complete: function(results) \{\
                console.log("Data loaded:", results.data);\
                processData(results.data);\
            \},\
            error: function(err) \{\
                document.getElementById('loading-msg').innerText = "\uc0\u9888 \u65039  \u35501 \u12415 \u36796 \u12415 \u22833 \u25943 : " + err;\
            \}\
        \});\
    \}\
\
    // \uc0\u12487 \u12540 \u12479 \u12434 Unit\u12372 \u12392 \u12395 \u25972 \u29702 \
    function processData(data) \{\
        allData = data.filter(row => row.Unit && row.English); // \uc0\u31354 \u34892 \u38500 \u22806 \
        if(allData.length === 0) \{\
            document.getElementById('loading-msg').innerText = "\uc0\u9888 \u65039  \u12487 \u12540 \u12479 \u12364 \u31354 \u12391 \u12377 \u12290 \u12471 \u12540 \u12488 \u12398 \u21015 \u21517 (Unit, English, Japanese)\u12434 \u30906 \u35469 \u12375 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 ";\
            return;\
        \}\
\
        // Unit\uc0\u12372 \u12392 \u12395 \u12464 \u12523 \u12540 \u12503 \u21270 \
        unitData = \{\};\
        allData.forEach(row => \{\
            if(!unitData[row.Unit]) unitData[row.Unit] = [];\
            unitData[row.Unit].push(\{ en: row.English, ja: row.Japanese \});\
        \});\
\
        // \uc0\u12503 \u12523 \u12480 \u12454 \u12531 \u29983 \u25104 \
        const sel = document.getElementById('unitSelect');\
        Object.keys(unitData).forEach(u => \{\
            const opt = document.createElement('option');\
            opt.value = u; opt.textContent = u;\
            sel.appendChild(opt);\
        \});\
\
        // \uc0\u30011 \u38754 \u36983 \u31227 \
        document.getElementById('data-status').textContent = "\uc0\u9989  Data Ready";\
        showScreen('screen-start');\
    \}\
\
    function showScreen(id) \{\
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));\
        document.getElementById(id).classList.add('active');\
    \}\
\
    // \uc0\u12466 \u12540 \u12512 \u38283 \u22987 \
    function startGame() \{\
        const unit = document.getElementById('unitSelect').value;\
        mode = document.getElementById('modeSelect').value;\
        if(!unit) return;\
\
        playQueue = [...unitData[unit]];\
        \
        // \uc0\u12521 \u12531 \u12480 \u12512 \u12471 \u12515 \u12483 \u12501 \u12523 \
        playQueue.sort(() => Math.random() - 0.5);\
\
        currentIndex = 0;\
        score = 0;\
        showScreen('screen-game');\
        \
        // UI\uc0\u35519 \u25972 \
        const isFlash = (mode === 'flash');\
        document.getElementById('options-area').style.display = isFlash ? 'none' : 'grid';\
        document.getElementById('flash-controls').style.display = isFlash ? 'flex' : 'none';\
\
        renderQuestion();\
    \}\
\
    function renderQuestion() \{\
        if(currentIndex >= playQueue.length) \{\
            document.getElementById('final-score').innerText = `Score: $\{score\} / $\{playQueue.length\}`;\
            showScreen('screen-result');\
            return;\
        \}\
\
        currentWord = playQueue[currentIndex];\
        document.getElementById('score-disp').textContent = `$\{currentIndex + 1\} / $\{playQueue.length\}`;\
        \
        const qText = document.getElementById('q-text');\
        const hText = document.getElementById('h-text');\
        hText.textContent = "";\
\
        // \uc0\u12514 \u12540 \u12489 \u21029 \u34920 \u31034 \
        if(mode === 'en-jp' || mode === 'flash') \{\
            qText.textContent = currentWord.en;\
            if(mode === 'en-jp') speak(currentWord.en); // \uc0\u12463 \u12452 \u12474 \u12394 \u12425 \u33258 \u21205 \u20877 \u29983 \
        \} else \{\
            qText.textContent = currentWord.ja;\
        \}\
\
        if(mode !== 'flash') generateOptions();\
    \}\
\
    function generateOptions() \{\
        const correct = currentWord;\
        const area = document.getElementById('options-area');\
        area.innerHTML = "";\
\
        // \uc0\u19981 \u27491 \u35299 \u12398 \u36984 \u25246 \u32930 \u12434 \u20316 \u25104 \u65288 \u20840 \u12487 \u12540 \u12479 \u12363 \u12425 \u12521 \u12531 \u12480 \u12512 \u65289 \
        let pool = allData.filter(w => w.English !== correct.English);\
        let choices = [correct, ...pool.sort(() => Math.random()-0.5).slice(0, 3)];\
        choices.sort(() => Math.random() - 0.5);\
\
        choices.forEach(c => \{\
            const btn = document.createElement('button');\
            btn.className = 'opt-btn';\
            \
            // \uc0\u12514 \u12540 \u12489 \u12395 \u12424 \u12387 \u12390 \u34920 \u31034 \u12434 \u22793 \u12360 \u12427 \
            if(mode === 'en-jp') btn.textContent = c.Japanese; // \uc0\u31572 \u12360 \u12399 \u26085 \u26412 \u35486 \
            else btn.textContent = c.English;  // \uc0\u31572 \u12360 \u12399 \u33521 \u35486 \
\
            btn.onclick = () => checkAnswer(c.English === correct.English, btn);\
            area.appendChild(btn);\
        \});\
    \}\
\
    function checkAnswer(isCorrect, btn) \{\
        if(isCorrect) \{\
            btn.style.background = "var(--correct)";\
            btn.style.color = "white";\
            score++;\
            if(mode === 'jp-en') speak(currentWord.en);\
            setTimeout(() => nextQuestion(1), 600);\
        \} else \{\
            btn.style.background = "var(--wrong)";\
            btn.style.color = "white";\
            // \uc0\u38291 \u36949 \u12360 \u12383 \u12425 \u23569 \u12375 \u24453 \u12387 \u12390 \u27425 \u12408 \u65288 \u12473 \u12467 \u12450 \u21152 \u31639 \u12394 \u12375 \u65289 \
            setTimeout(() => nextQuestion(1), 1000);\
        \}\
    \}\
\
    // \uc0\u12501 \u12521 \u12483 \u12471 \u12517 \u12459 \u12540 \u12489 \u29992 \u12463 \u12522 \u12483 \u12463 \
    function handleCardClick() \{\
        if(mode !== 'flash') return;\
        const qText = document.getElementById('q-text');\
        const hText = document.getElementById('h-text');\
        \
        // \uc0\u35023 \u36820 \u12377 \
        if(qText.textContent === currentWord.en) \{\
            qText.textContent = currentWord.ja;\
            hText.textContent = currentWord.en;\
        \} else \{\
            qText.textContent = currentWord.en;\
            hText.textContent = "";\
            speak(currentWord.en);\
        \}\
    \}\
\
    function nextQuestion(step) \{\
        currentIndex += step;\
        if(currentIndex < 0) currentIndex = 0; // \uc0\u25147 \u12426 \u12377 \u12366 \u38450 \u27490 \
        renderQuestion();\
    \}\
\
    function speak(text) \{\
        const u = new SpeechSynthesisUtterance(text);\
        u.lang = 'en-US';\
        speechSynthesis.speak(u);\
    \}\
</script>\
\
</body>\
</html>}